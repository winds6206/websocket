XBB體育開發站internal-ingress測試資訊統整

websocket 測試皆使用 websocat 套件

> 使用 websocat 套件勿使用 -H "Host: xxx.yyy" 帶入 Host，因為實際上表頭沒辦法被帶進去，所以內網測試都需要綁上hosts

使用公司內部服務測試

1. extenal-ingress：本機測試
     - 網頁 → 網頁可正常開啟
     - websocket → ws協定可以正常連線

2. internal-ingress：測試方式使用內網機器(Debian) 測試，綁定hosts
     - 網頁 → 使用 curl 服務可以正常回應
     - websocket → 無法連接

3. 在 websocket 服務前多加一層proxy
     - websocket → ws協定可以正常連線

封包路徑：internal-ingress → Nginx-proxy → websocket服務

---

使用自建 websocket

1. internal-ingress：使用內網機器(Debian) 測試，綁定hosts
     - 網頁 → 使用 curl 服務可以正常回應
     - websocket → 無法連接

2. 使用 service LB 暴露外部IP
     - 網頁 → 使用 curl 服務可以正常回應
     - websocket → ws協定可以正常連線

3. 使用自建 proxy
     - 網頁 → 使用 curl 服務可以正常回應
     - websocket → ws協定可以正常連線
